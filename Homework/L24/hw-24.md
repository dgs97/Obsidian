**Домашнее задание №24**

--- 

**Задание 1: Создание Dockerfile для приложения веб-сервера**

Вам необходимо написать Dockerfile для создания контейнера с приложением веб-сервера на основе образа Ubuntu 20.04. Приложение должно быть запущено на порту 8080 и должно отдавать статические файлы из каталога /app/static.

Шаги, которые необходимо выполнить:

1. Создайте новый файл Dockerfile в пустой директории на вашем локальном компьютере.
2. Напишите инструкцию FROM, которая указывает базовый образ Ubuntu 20.04.
3. Установите необходимые зависимости с помощью инструкции RUN. Установите пакеты nginx и curl, а также создайте каталог /app/static.
4. Скопируйте файл конфигурации nginx из вашего локального каталога внутрь контейнера с помощью инструкции COPY.
5. Скопируйте статические файлы из каталога /app/static на вашем локальном компьютере внутрь контейнера с помощью инструкции COPY.
6. Используйте инструкцию EXPOSE для открытия порта 8080.
7. Используйте инструкцию CMD для запуска команды nginx с указанием пути к файлу конфигурации, который вы скопировали на шаге 4.

```YML
# Шаг 2: Указываем базовый образ
FROM ubuntu:20.04

# Шаг 3: Обновляем систему и устанавливаем зависимости
RUN apt-get update && \
    apt-get install -y nginx curl

# Создаем каталог для статики
RUN mkdir -p /app/static

# Шаг 4: Копируем конфигурацию NGINX из текущего каталога в контейнер
COPY nginx.conf /etc/nginx/nginx.conf

# Шаг 5: Копируем статические файлы в контейнер
COPY app/static/ /app/static/

# Шаг 6: Открываем порт 8080
EXPOSE 8080

# Шаг 7: Запускаем NGINX при старте контейнера
CMD ["nginx", "-g", "daemon off;"]
```

1. Сохраните файл Dockerfile и соберите образ с помощью команды docker build.

```bash
docker build -t my-nginx-app .
```

8. Запустите контейнер из образа с помощью команды docker run и проверьте, что веб-сервер отдает статические файлы из каталога /app/static на порту 8080.

```bash
docker run -d --name nginx -p 8080:8080 my-nginx-app
```

![](screenshots/Pasted%20image%2020250614091055.png)

---

**Задание 2 – развертывание приложения с помощью Docker-compose**

  

Шаги, которые необходимо выполнить:

1. Создайте новый файл docker-compose.yml в пустой директории на вашем локальном компьютере.
2. Напишите инструкцию version в версии 3.
3. Определите сервис для базы данных PostgreSQL. Назовите его "db". Используйте образ postgres:latest, задайте переменные окружения POSTGRES_USER, POSTGRES_PASSWORD и POSTGRES_DB для установки пользовательского имени, пароля и имени базы данных соответственно.
4. Определите сервис для веб-сервера на основе образа NGINX. Назовите его "web". Используйте образ nginx:latest. Определите порт, на котором должен работать сервер, с помощью инструкции ports. Задайте путь к файлам конфигурации NGINX внутри контейнера, используя инструкцию volumes.
5. Определите ссылку на сервис базы данных в сервисе веб-сервера. Используйте инструкцию links.
6. Сохраните файл docker-compose.yml и запустите приложение с помощью команды docker-compose up.

```yml
# Определяем сервисы
services:
  # Шаг 3: Сервис PostgreSQL
  db:
    image: postgres:latest
    container_name: my_postgres_db
    environment:
      POSTGRES_USER: ${POSTGRES_USER}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD}
      POSTGRES_DB: ${POSTGRES_DB}
  # Шаг 4: Сервис NGINX (веб-сервер)
  web:
    image: nginx:latest
    container_name: my_nginx_server
    ports:
      - "80:80"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
    depends_on:
      - db
    links:
      - db

```

```bash 
docker compose up -d
```

7. Проверьте, что приложение работает, перейдя в браузере на localhost:80.

![](screenshots/Pasted%20image%2020250614095422.png)

--- 

Задание 3*** — Развернуть 5 контейнеров на любых пяти языках программирования и вывести hello world в браузере.  
  
  

- C++

![](screenshots/Pasted%20image%2020250614141340.png)

- Java

![](screenshots/Pasted%20image%2020250614134605.png)

- Go

![](screenshots/Pasted%20image%2020250614134440.png)

- JavaScript

![](screenshots/Pasted%20image%2020250614134525.png)

- Python

![](screenshots/Pasted%20image%2020250614134343.png)

--- 