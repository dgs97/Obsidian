# Домашнее задание: Базовые навыки облачной безопасности

## Задача 1

# Отчет по анализу настроек безопасности облачного аккаунта Google Cloud Platform

---

## Чек-лист базовых параметров безопасности

Для анализа были выбраны следующие 5 базовых параметров безопасности:

1.  **Многофакторная аутентификация (MFA/2FA):** Обеспечивает дополнительный уровень защиты учетных записей.
2.  **Централизованное логирование и мониторинг активности:** Позволяет отслеживать действия пользователей и сервисов для обнаружения аномалий.
3.  **Использование принципа наименьших привилегий (Least Privilege):** Гарантирует, что пользователи и сервисы имеют только те разрешения, которые абсолютно необходимы для выполнения их функций.
4.  **Политики паролей:** Регламентируют сложность и периодичность смены паролей для повышения их устойчивости к взлому.
5.  **Использование групп безопасности/правил брандмауэра:** Контролирует сетевой доступ к ресурсам, разрешая только необходимый трафик.

---

## Статус настроек безопасности в аккаунте GCP

После анализа моей учетной записи GCP были выявлены следующие статусы для перечисленных функций:

* **Многофакторная аутентификация (MFA/2FA):**
    * **Статус:** Не включена
    * **Комментарий:**

* **Логирование активности пользователей:**
    * **Статус:** Включено 
    * **Комментарий:** Включены Admin Activity audit logs ,рекомендуется включить Data Access audit logs.

* **Базовые группы безопасности (IAM-группы и правила брандмауэра):**
    * **Статус:** Используются 
    * **Комментарий:** IAM-группы активно используются для централизованного управления доступом к ресурсам GCP. Каждая IAM-группа соответствует определённой роли (например, `roles/editor`, `roles/viewer`, `roles/owner`) и содержит пользователей или сервисные аккаунты, которым необходим доступ к конкретным проектам или ресурсам.

* **Политики паролей:**
    * **Статус:** **Применяются (на уровне Google Account)**
    * **Комментарий:** 

* **Минимальные привилегии для пользователей:**
    * **Статус:** Применяется
    * **Комментарий:** Принцип "минимальных привилегий" строго соблюдается при выдаче ролей пользователям и сервисным аккаунтам. Каждый пользователь получает только те разрешения, которые необходимы для выполнения его задач.
---
## Задача 2: Создание универсального cloud-образа (Опционально)
* Создать образ на основе Debian 12.
* Записать в образ публичный SSH-ключ для беспарольного доступа.

* **Установить софт:**
    * **Контейнеризация:** docker, docker-compose, docker swarm
    * **Сеть и отладка:** telnet, traceroute, tshark, tcpdump, nmap, mtr, lsof, ctop, htop
    * **Система и мониторинг:** restic, python3-pip, htop, iotop, iftop, strace, git, curl
    * **Дополнительно:** установить `zsh` и настроить `oh-my-zsh`.

* **Настроить систему:**
    * Назначить DNS-сервер 1.1.1.1.
    * Запретить вход по паролю через SSH.
    * Запретить вход для пользователя `root` через SSH.
    * Ограничить количество попыток входа с неверным ключом.
    * Настроить динамическое сообщение дня (MOTD) с выводом системной информации.

Установка софта и настройка образа через `Ansible` ,`vm` развернута в `Virtual Box`.

* **Финал:**
    * Весь настроенный образ запаковать в бинарный файл (`qcow2`, `iso` или другой).
    
    Образ лежит по пути `/var/lib/libvirt/images/debian12_image.qcow2`
    
    * Запустить несколько экземпляров этого образа в облачной среде.

Конвертируем в `raw` и сжимаем:

```bash
qemu-img convert -f qcow2 -O raw debian12_image.qcow2 debian12_image.raw
```

```bash
tar -Sc 'disk.raw' | gzip > disk.raw.tar.gz
```

Создаем `bucket` и загружаем образ:

```bash 
gsutil mb gs://my-bucket-hw-38
```

```bash
gsutil cp debian12_image.tar.gz gs://my-bucket-hw-38
```

Создаем образ `Compute Engine`:

```bash
gcloud compute images create debian12-custom \
  --source-uri=gs://my-bucket-hw-38/disk.raw.tar.gz \
  --storage-location=us-central1 \
  --family=debian-custom
```

![](screenshots/Pasted%20image%2020250802125316.png)

Запуск нескольких инстансов:

```bash
gcloud compute instances create vm-1 vm-2 vm-3 \
    --image-family=debian-custom \
    --machine-type=e2-micro \
    --zone=us-central1-a
```

![](screenshots/Pasted%20image%2020250802130419.png)

![](screenshots/Pasted%20image%2020250802130445.png)