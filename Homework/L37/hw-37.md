## Домашнее задание №37: Развертывание статического веб-сайта с помощью Google Cloud Platform (GCP)

**Цель:** Изучить и практически применить облачные сервисы Google Cloud Platform (GCP) для хостинга статического веб-сайта, доставки контента и, опционально, создания бессерверной функции.

**Задание:**

### 1. Создайте Cloud Storage Bucket (аналог S3):

- В консоли GCP перейдите в раздел **Cloud Storage** и нажмите **"Создать бакет"** (Create bucket).
    
- Присвойте бакету уникальное имя.
    
- Выберите регион, ближайший к вашей целевой аудитории.
    
- Выберите стандартный класс хранения.
    
- Настройте управление доступом, чтобы бакет был **общедоступным** (Public). Это позволит Cloud CDN получать доступ к вашим файлам.
    
- **Загрузите** статические файлы вашего веб-сайта (HTML, CSS, JavaScript, изображения и т. д.) в созданный бакет. Убедитесь, что ваш `index.html` находится в корне бакета.

![](screenshots/Pasted%20image%2020250727143926.png)

---

### 2. Настройте Cloud CDN (аналог CloudFront):

- В консоли GCP перейдите в раздел **Network Services** > **Cloud CDN**.
    
- Нажмите **"Включить Cloud CDN"** (Enable Cloud CDN).
    
- Создайте новый **Load Balancer (Балансировщик нагрузки)**.
    
    - Выберите тип балансировщика нагрузки **"HTTP(S) Load Balancing"**.
        
    - В разделе **"Backend configuration" (Настройка бэкенда)** создайте **Backend bucket (Бэкенд-бакет)**, указав ваш созданный Cloud Storage bucket.
        
    - Включите **Cloud CDN** для этого бэкенд-бакета.
        
    - В разделе **"Host and path rules" (Правила хоста и пути)** убедитесь, что все запросы направляются на ваш бэкенд-бакет.
        

![](screenshots/Pasted%20image%2020250727154529.png)

---

### 3. Настройте DNS-запись:

- Получите **IP-адрес** или **CNAME-запись** вашего Load Balancer в GCP (найдите его в разделе **Network Services** > **Load Balancing**).
    
- Откройте управление DNS вашего домена у вашего провайдера доменных имен.
    
- **Создайте запись типа A**, указывающую на IP-адрес вашего Load Balancer. Если вы используете домен верхнего уровня (например, `example.com`), это будет A-запись. Если вы используете поддомен (например, `www.example.com`), вы также можете использовать CNAME-запись, указывающую на публичное имя хоста вашего балансировщика нагрузки (если оно доступно).

![](screenshots/Pasted%20image%2020250727154420.png)

---

### 4. Проверьте работу:

- После настройки DNS подождите некоторое время для распространения изменений (обычно от нескольких минут до нескольких часов).
    
- Откройте веб-браузер и введите ваш домен.
    
- Убедитесь, что веб-сайт загружается из дистрибуции Cloud CDN. Вы можете проверить заголовки ответа (например, `X-Cache`) в инструментах разработчика браузера, чтобы убедиться, что контент обслуживается из кэша Cloud CDN.


![](screenshots/Pasted%20image%2020250727154317.png)

---

### Опционально: Создание бессерверной функции с использованием Cloud Functions (аналог AWS Lambda)

**Выберите язык программирования:** Node.js, Python, Go, Java, .NET, Ruby, PHP.

- В консоли GCP перейдите в раздел **Cloud Functions**.
    
- Нажмите **"Создать функцию"** (Create function).
    
- Присвойте функции имя.
    
- Выберите **регион**.
    
- Выберите **триггер HTTP** для простой демонстрации.
    
- Выберите свой язык программирования.
    
- Напишите простой код функции. Например, для Python:
    
    Python
    
    ```
    def hello_gcp(request):
        """Responds to an HTTP request with 'Hello GCP!'."""
        return 'Hello GCP!'
    ```
    
- Разверните функцию.
    
- **Протестируйте функцию**, перейдя по URL-адресу, предоставленному Cloud Functions, или используя `curl` из командной строки. Убедитесь, что функция выполняет ожидаемую операцию и возвращает правильный результат.