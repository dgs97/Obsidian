# Краткая инструкция: что мы сделали от начала до конца

Вот весь путь, который мы прошли для настройки этой системы: 

    Начальная настройка : 

        Авторизовались в Google Cloud через  gcloud. 

        Настроили "quota project", чтобы Terraform мог работать с вашим аккаунтом. 

    Создание инфраструктуры как код (IaC) : 

        Написали Terraform-конфигурацию в трёх файлах ( main.tf, variables.tf, terraform.tfvars). 

        Определили изолированную  сеть VPC  и  подсеть . 

        Настроили  правила файрвола , открыв SSH только для доверенных IP. 

        Создали выделенный  сервисный аккаунт  с минимальными правами (Viewer, Log Writer). 

        Определили  виртуальную машину  типа  e2-small как  Spot VM  для максимальной экономии. 

    Настройка метода подключения (SSH) : 

        Сгенерировали  SSH-ключ  специально для Jenkins ( jenkins_key и  jenkins_key.pub). 

        Добавили в метаданные ключ для Jenkins (пользователь  devops) и ваш личный ключ (пользователь  nikolos). 

    Конфигурация Дженкинса  : 

        Установили плагин  SSH Build Agents . 

        Добавили  приватный  ключ Jenkins в  Credentials . 

        Создали  постоянного агента (Permanent Agent) . 

        Указали способ запуска  Launch agents via SSH , вписав IP-адрес машины и выбрав созданные Credentials. 

    Запуск и отладка : 

        Выполнили  terraform apply

        Проверили подключение Jenkins к агенту и убедились, что он "онлайн". 

        Научились подключаться к машине по SSH для ручной проверки.