### Домашнее задание №22

*Цель: получить практический опыт работы c Ansible-ролями*

---

#### Задание 1: просмотрите и повторите все манипуляции, указанные в видеоуроке по ссылке

https://www.youtube.com/watch?v=9pHMZnb3JDQ

*В данном ролике рассматриваются для настройки Ansible-ролей.*

```bash
mkdir roles
cd roles
ansible-galaxy init deploy_apache_web
```

![](screenshots/Pasted%20image%2020250601144945.png)

До запуска `playbook` :

![ ](screenshots/Pasted%20image%2020250601150027.png)

Запускаем playbook на локальном сервере и запрашиваем sudo пароль:

```bash
ansible-playbook playbook.yml -i hosts.txt -l servers_local --ask-become-pass
```

![](screenshots/Pasted%20image%2020250601150410.png)

Установили apache2,передали `index.html` в виде шаблона , картинки с помощью модуля `copy` :

![](screenshots/Pasted%20image%2020250601150739.png)

---

#### Задание 2: (опционально, на выбор):

• Роль для установки и настройки веб-сервера. Напишите роль, которая устанавливает веб-сервер (например, Apache или Nginx), настраивает его для работы с вашим приложением и добавляет необходимые конфигурационные файлы. Роль должна принимать переменные для конфигурирования сервера, такие как порт, на котором он будет слушать и путь к вашему приложению.

• Роль для настройки базы данных. Напишите роль, которая устанавливает и настраивает базу данных (например, MySQL или PostgreSQL). Роль должна принимать переменные для конфигурирования базы данных, такие как пароль для root-пользователя и порт, на котором база данных будет слушать.

• Роль для настройки мониторинга сервера. Напишите роль, которая устанавливает и настраивает инструменты мониторинга (например, Nagios или Zabbix) на ваш сервер. Роль должна принимать переменные для конфигурирования инструментов мониторинга, такие как адрес электронной почты для оповещений.

Создал роль `zabbix-agent_setup` которая устанавливает `zabbix-agent` на узел для мониторинга и настраивает конфиг `zabbix-agentd.conf`

![](screenshots/Pasted%20image%2020250601161156.png)

![](screenshots/Pasted%20image%2020250601161120.png)

• Роль для установки и настройки приложения. Напишите роль, которая устанавливает ваше приложение, настраивает его для работы с базой данных и веб-сервером, добавляет необходимые конфигурационные файлы и запускает его в качестве сервиса. Роль должна принимать переменные для конфигурирования приложения, такие как адрес базы данных и порт веб-сервера.

• Роль для управления пользователями и группами. Напишите роль, которая создает пользователей и группы на вашем сервере, назначает им права доступа к файлам и каталогам и настраивает SSH-доступ для каждого пользователя. Роль должна принимать переменные для конфигурирования пользователей и групп, такие как имена пользователей и групп и их пароли.

• Роль для установки и настройки SSL-сертификатов. Напишите роль, которая устанавливает SSL-сертификаты на ваш сервер, настраивает веб-сервер для работы с ними и добавляет необходимые конфигурационные файлы. Роль должна принимать переменные для конфигурирования SSL-сертификатов, такие как путь к сертификату и к приватному ключ
 
---